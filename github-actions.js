(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{69:function(s,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,o=n(a(3)),r=function(s){if(s&&s.__esModule)return s;var e={};if(null!=s)for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){var t=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(s,a):{};t.get||t.set?Object.defineProperty(e,a,t):e[a]=s[a]}return e.default=s,e}(a(0));n(a(2)),n(a(114));function n(s){return s&&s.__esModule?s:{default:s}}function i(s,e,a,o){t||(t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=s&&s.defaultProps,n=arguments.length-3;if(e||0===n||(e={children:void 0}),e&&r)for(var i in r)void 0===e[i]&&(e[i]=r[i]);else e||(e=r||{});if(1===n)e.children=o;else if(n>1){for(var l=new Array(n),c=0;c<n;c++)l[c]=arguments[c+3];e.children=l}return{$$typeof:t,type:s,key:void 0===a?null:""+a,ref:null,props:e,_owner:null}}function l(s,e,a){return e in s?Object.defineProperty(s,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[e]=a,s}function c(){return(c=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s}).apply(this,arguments)}function d(s,e){if(null==s)return{};var a,t,o=function(s,e){if(null==s)return{};var a,t,o={},r=Object.keys(s);for(t=0;t<r.length;t++)a=r[t],e.indexOf(a)>=0||(o[a]=s[a]);return o}(s,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);for(t=0;t<r.length;t++)a=r[t],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(s,a)&&(o[a]=s[a])}return o}const h=s=>{let{to:e}=s,a=d(s,["to"]);return e.includes("http")?r.default.createElement("a",c({},s,{href:e})):("#"===e[0]&&(e=o.default.join("/auto/","pages/build-platforms/github-actions.html")+e),r.default.createElement("a",c({},a,{href:e,onClick:a=>{if(a.preventDefault(),"#"===s.to)return!1;const t=new URL(o.default.join(window.location.origin,e));window.history.pushState((s=>({href:s.href,pathname:s.pathname,hash:s.hash,query:s.query}))(t),null,e),s.onClick();const r=new CustomEvent("changeLocation",{detail:t});return dispatchEvent(r),!1}})))};h.defaultProps={href:"",onClick:()=>{}};const p=s=>{var e,a;return a=e=class extends r.default.Component{constructor(...s){super(...s),l(this,"state",{Comp:null})}componentDidMount(){!this.state.Comp&&this.props.shouldLoad&&s().then(s=>{this.setState({Comp:s.default})})}render(){const{Comp:s}=this.state;return s?r.default.createElement(s,this.props,this.props.children||null):null}},l(e,"defaultProps",{shouldLoad:!0}),a};p(()=>a.e(27).then(a.bind(null,115))),p(()=>a.e(27).then(a.bind(null,116)));var u=i("h1",{},void 0,"GitHub Actions"),m=i("p",{},void 0,"The following config declares the ",i("code",{},void 0,"release")," action that run on all branches. The job will either release:"),v=i("ul",{},void 0,i("li",{},void 0,"a new ",i("code",{},void 0,"latest")," version from ",i("code",{},void 0,"master")),i("li",{},void 0,"a ",i("code",{},void 0,"canary")," build from a pull request (only on the main fork and if your package manager plugin implements them)")),g=i("p",{},void 0,i("strong",{},void 0,i("code",{},void 0,".github/workflows/release.yml"))),b=i("article",{className:"message column is-warning"},void 0,i("div",{className:"message-body"},void 0,i("p",{},void 0,"You must use some sort of action that implements ",i("code",{},void 0,"skip ci")," functionality (as seen below). Otherwise you will get stuck in a release loop!"))),N=i("pre",{},void 0,i("code",{className:"language-yaml"},void 0,i("span",{className:"hljs-attr"},void 0,"name:")," ",i("span",{className:"hljs-string"},void 0,"Release"),i("br",{}),i("br",{}),i("span",{className:"hljs-attr"},void 0,"on:")," ",i("span",{className:"hljs-string"},void 0,"[push]"),i("br",{}),i("br",{}),i("span",{className:"hljs-attr"},void 0,"jobs:"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"  release:"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"    runs-on:")," ",i("span",{className:"hljs-string"},void 0,"ubuntu-latest"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"    if:")," ",i("span",{className:"hljs-string"},void 0,"\"!contains(github.event.head_commit.message, 'ci skip') && !contains(github.event.head_commit.message, 'skip ci')\""),i("br",{}),i("span",{className:"hljs-attr"},void 0,"    steps:"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"      - uses:")," ",i("span",{className:"hljs-string"},void 0,"actions/checkout@v2"),i("br",{}),i("br",{}),i("span",{className:"hljs-attr"},void 0,"      - name:")," ",i("span",{className:"hljs-string"},void 0,"Prepare")," ",i("span",{className:"hljs-string"},void 0,"repository"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"        run:")," ",i("span",{className:"hljs-string"},void 0,"git")," ",i("span",{className:"hljs-string"},void 0,"fetch")," ",i("span",{className:"hljs-bullet"},void 0,"--unshallow")," ",i("span",{className:"hljs-bullet"},void 0,"--tags"),i("br",{}),i("br",{}),i("span",{className:"hljs-attr"},void 0,"      - name:")," ",i("span",{className:"hljs-string"},void 0,"Use")," ",i("span",{className:"hljs-string"},void 0,"Node.js")," ",i("span",{className:"hljs-number"},void 0,"12."),i("span",{className:"hljs-string"},void 0,"x"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"        uses:")," ",i("span",{className:"hljs-string"},void 0,"actions/setup-node@v1"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"        with:"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"          node-version:")," ",i("span",{className:"hljs-number"},void 0,"12."),i("span",{className:"hljs-string"},void 0,"x"),i("br",{}),i("br",{}),i("span",{className:"hljs-attr"},void 0,"      - name:")," ",i("span",{className:"hljs-string"},void 0,"Cache")," ",i("span",{className:"hljs-string"},void 0,"node")," ",i("span",{className:"hljs-string"},void 0,"modules"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"        uses:")," ",i("span",{className:"hljs-string"},void 0,"actions/cache@v1"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"        with:"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"          path:")," ",i("span",{className:"hljs-string"},void 0,"node_modules"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"          key:")," ",i("span",{className:"hljs-string"},void 0,"yarn-deps-${{")," ",i("span",{className:"hljs-string"},void 0,"hashFiles('yarn.lock')")," ",i("span",{className:"hljs-string"},void 0,"}}"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"          restore-keys:")," ",i("span",{className:"hljs-string"},void 0,"|",i("br",{}),"            yarn-deps-$",i("span",{className:"hljs-template-variable"},void 0,"{{ hashFiles('yarn.lock') }}"),i("br",{}),i("br",{})),i("span",{className:"hljs-attr"},void 0,"      - name:")," ",i("span",{className:"hljs-string"},void 0,"Create")," ",i("span",{className:"hljs-string"},void 0,"Release"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"        env:"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"          GITHUB_TOKEN:")," ",i("span",{className:"hljs-string"},void 0,"${{")," ",i("span",{className:"hljs-string"},void 0,"secrets.GITHUB_TOKEN")," ",i("span",{className:"hljs-string"},void 0,"}}"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"          NPM_TOKEN:")," ",i("span",{className:"hljs-string"},void 0,"${{")," ",i("span",{className:"hljs-string"},void 0,"secrets.NPM_TOKEN")," ",i("span",{className:"hljs-string"},void 0,"}}"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"        run:")," ",i("span",{className:"hljs-string"},void 0,"|",i("br",{}),"          yarn install --frozen-lockfile",i("br",{}),"          yarn build",i("br",{}),"          npx auto shipit",i("br",{})))),j=i("p",{},void 0,"If you are having problems make sure you have done the following:"),f=i("ul",{},void 0,i("li",{},void 0,"Any required secrets for plugins are set (e.g. ",i("code",{},void 0,"NPM_TOKEN")," with the NPM plugin)"),i("li",{},void 0,"Update references of ",i("code",{},void 0,"<your-github-user>"),", ",i("code",{},void 0,"<project-owner>"),", and ",i("code",{},void 0,"<project-repo>")," with the appropriate values")),y=i("p",{},void 0,"GitHub actions require a little more setup to use ",i("code",{},void 0,"auto")," with branch protection."),w=i("pre",{},void 0,i("code",{className:"language-yml"},void 0,i("span",{className:"hljs-attr"},void 0,"steps:"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"  - uses:")," ",i("span",{className:"hljs-string"},void 0,"actions/checkout@v2"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"    with:"),i("br",{}),"      ",i("span",{className:"hljs-comment"},void 0,"# Ensure that git uses your token with write access to the repo"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"      token:")," ",i("span",{className:"hljs-string"},void 0,"${{")," ",i("span",{className:"hljs-string"},void 0,"secrets.GH_TOKEN")," ",i("span",{className:"hljs-string"},void 0,"}}"),i("br",{}),i("br",{}),i("span",{className:"hljs-attr"},void 0,"  - name:")," ",i("span",{className:"hljs-string"},void 0,"Prepare")," ",i("span",{className:"hljs-string"},void 0,"repository"),i("br",{}),"    ",i("span",{className:"hljs-comment"},void 0,"# Fetch full git history and tags"),i("br",{}),i("span",{className:"hljs-attr"},void 0,"    run:")," ",i("span",{className:"hljs-string"},void 0,"git")," ",i("span",{className:"hljs-string"},void 0,"fetch")," ",i("span",{className:"hljs-bullet"},void 0,"--unshallow")," ",i("span",{className:"hljs-bullet"},void 0,"--tags"),i("br",{}))),k=i("code",{},void 0,"auto-config-hipstersmoothie"),P=i("code",{},void 0,"create-check"),O=i("code",{},void 0,"octokit-cli");var _=s=>i("div",{className:s.className},void 0,i("section",{},void 0,u,m,v,g,b,N,i("h2",{id:"troubleshooting"},void 0,"Troubleshooting ",i(h,{currentPage:s.currentPage,className:"fas fa-hashtag headerLink",to:"#troubleshooting","aria-hidden":"true"})),j,f,i("h3",{id:"running-with-branch-protection"},void 0,"Running With Branch Protection ",i(h,{currentPage:s.currentPage,className:"fas fa-hashtag headerLink",to:"#running-with-branch-protection","aria-hidden":"true"})),y,w,i("h2",{id:"examples"},void 0,"Examples ",i(h,{currentPage:s.currentPage,className:"fas fa-hashtag headerLink",to:"#examples","aria-hidden":"true"})),i("ul",{},void 0,i("li",{},void 0,i(h,{currentPage:s.currentPage,target:"_blank",to:"https://github.com/hipstersmoothie/auto-config-hipstersmoothie/blob/07d128afd96ac6a7b0fe3f04313847c0fc3d84a2/.github/workflows/push.yml",className:"external-link"},void 0,k)),i("li",{},void 0,i(h,{currentPage:s.currentPage,target:"_blank",to:"https://github.com/hipstersmoothie/create-check/blob/master/.github/workflows/push.yml",className:"external-link"},void 0,P)),i("li",{},void 0,i(h,{currentPage:s.currentPage,target:"_blank",to:"https://github.com/hipstersmoothie/octokit-cli/blob/master/.github/workflows/push.yml",className:"external-link"},void 0,O)))));e.default=_,s.exports=e.default}}]);
//# sourceMappingURL=github-actions.js.map